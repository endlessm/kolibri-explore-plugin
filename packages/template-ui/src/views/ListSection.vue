<template>
  <div
    :style="{ backgroundImage: backgroundImageURL }"
  >
    <slot></slot>
    <FilterContent v-if="hasFilters" />

    <div v-if="isFilterEmpty">
      <div v-if="isInlineLevel">
        <CardGrid
          v-for="subsection in getChildren(section)"
          :id="subsection.id"
          :key="subsection.id"
          :nodes="getChildren(subsection)"
          :mediaQuality="mediaQuality"
          :cardColumns="cardColumns"
        >
          <b-row>
            <SectionTitle :section="subsection" />
          </b-row>
        </CardGrid>
      </div>
      <div v-else>
        <CardGrid
          :id="section.id"
          :key="section.id"
          :nodes="getChildren(section)"
          :mediaQuality="mediaQuality"
          :cardColumns="cardColumns"
          variant="collapsible"
        />
      </div>
    </div>
    <div v-else>
      <FilterResult :node="section" />
    </div>

  </div>
</template>

<script>
import { mapState, mapGetters } from 'vuex';

export default {
  name: 'ListSection',
  computed: {
    ...mapState(['section', 'cardColumns', 'mediaQuality', 'hasFilters']),
    ...mapGetters({
      getChildren: 'getChildren',
      isInlineLevel: 'isInlineLevel',
      getAssetURL: 'getAssetURL',
      isFilterEmpty: 'filters/isEmpty',
    }),
    backgroundImageURL() {
      return this.getAssetURL('sectionBackgroundImage');
    },
  },
};
</script>
